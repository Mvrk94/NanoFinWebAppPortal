var app=angular.module("myApp",["ngRoute","ngMap"]);app.config(function($routeProvider,$locationProvider){$routeProvider.when("/",{redirectTo:function(){return"/home"}}).when("/home",{title:"Insurance Manager",templateUrl:"/views/components/InsuranceManager/home.html",controller:"homePageController"}).when("/ProductManagement",{title:"Insurance Manager",templateUrl:"/views/components/InsuranceManager/productManagement.html",controller:"productManagementPageController"}).when("/Products",{title:"Insurance Manager",templateUrl:"/views/components/InsuranceManager/products.html",controller:"productsPageController"}).when("/addProduct",{title:"Insurance Manager",templateUrl:"/views/components/InsuranceManager/AddInsuranceProduct.html",controller:"AddProductPageController"}).when("/ProcessPurchases",{title:" home",templateUrl:"/views/components/InsuranceManager/processApplicationsWithRisk.html",controller:"insuranceApplicationsPageController"}).when("/ProcessSingleApplication",{title:" process",templateUrl:"/views/components/InsuranceManager/processConsumerApplications.html",controller:"insuranceApplicationsPageController"}).when("/DataAnalityics",{title:" data analityics",templateUrl:"/views/components/InsuranceManager/UnrealEngine.html",controller:"insuranceApplicationsPageController"}).when("/Reports",{title:"reports",templateUrl:"/views/components/InsuranceManager/reports.html"}).when("/validate",{title:"validate",templateUrl:"/views/components/home/validatorUsers.html"}).when("/test",{title:"validate",templateUrl:"/views/components/test/test.html"}).when("/mapLocation",{title:"Geo reports",templateUrl:"/views/components/test/GeoReports.html"}).when("/viewClaims",{title:"View Claims",templateUrl:"/views/components/InsuranceManager/viewUnprocessedClaims.html"}).when("/processClaim",{title:"Process Claim",templateUrl:"/views/components/InsuranceManager/processClaim.html"}).otherwise({templateUrl:"/views/components/InsuranceManager/home.html",controller:"homePageController"}),$locationProvider.html5Mode(!0)}),app.controller("homePageController",["$scope",function($scope){}]),app.controller("aboutPageController",["$scope",function($scope){}]),app.controller("productManagementPageController",["$scope",function($scope){}]),app.controller("productsPageController",["$scope",function($scope){}]),app.controller("AddProductPageController",["$scope",function($scope){}]),app.controller("contactPageController",["$scope",function($scope){$scope.title="contact"}]),app.controller("insuranceApplicationsPageController",["$scope",function($scope){}]),app.run(["$rootScope","$route",function($rootScope,$route){$rootScope.$on("$routeChangeSuccess",function(){document.title=$route.current.title})}]),angular.module("myApp").controller("reportsNaster",["$scope","$http","$compile",function($scope,$http,$compile){var insurancetypeIDs=[1,21,31],insurancetypeNames=["Assets","Medical","Funeral"];$scope.getType=function(insuranceType){return 1==insuranceType?"Assets":2==insuranceType?"Travel":11==insuranceType?"Legal":21==insuranceType?"Medical":31==insuranceType?"Funeral":"Value Added"},$scope.reportName=" ",$scope.shortdescription="";var fillInsuranceType=function(){for(var result="",insurancetypeIDs=[1,21,31],c=0;c<insurancetypeIDs.length;c++)result+="\t<li  style='margin-bottom:9px;width:280px'>",result+="\t<div class='row'>",result+="\t<div class='col-sm-1 col-sm-push-1 removePersonalSpace'>",result+="<label><input type='checkbox' class='flat-red'></label>",result+="\t</div>",result+="",result+="\t<div class='col-sm-7 col-sm-push-1 removePersonalSpace' style='width:250px'>",result+=String(insurancetypeNames[c])+" <br />",result+="<span style='font-size:12px'>.</span>",result+="</div>",result+="</div>",result+="</li>";result+="<li style='font-size:19px' >  <br /> <br /></li>";var element=document.getElementById("itemList");element.innerHTML=result,$('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({checkboxClass:"icheckbox_flat-green"})},insurnaceTypeSelected=[],canDraw=0,canDrawInsuranceType=0,errorCallBack=function(response){$scope.products=response.data},saveItemInformartion=function(response){$scope.itemsData=response,document.getElementById("drawReport").style.visibility="hidden"},setTargetSales=function(responce){$scope.targetInfor=responce},setProduct1=function(responce){$scope.product1data=responce.data,canDraw+=1,canDraw%2===0&&drawCompareProducts()},setProduct2=function(responce){$scope.product2data=responce.data,canDraw+=1,canDraw%2===0&&drawCompareProducts()},fillOptions=function(){for(var result="",data=$scope.itemsData.data,c=0;c<data.length;c++)result+="\t<li  style='margin-bottom:9px;width:280px'>",result+="\t<div class='row'>",result+="\t<div class='col-sm-1 col-sm-push-1 removePersonalSpace'>",result+="<label><input type='checkbox' id='checkbox"+data[c].Product_ID+"' class='flat-red'></label>",result+="\t</div>",result+="",result+="\t<div class='col-sm-7 col-sm-push-1 removePersonalSpace' style='width:250px'>",result+=String(data[c].name)+" <br />",result+="<span style='font-size:12px'>"+$scope.getType(data[c].InsuranceType_ID)+"</span>",result+="</div>",result+="</div>",result+="</li>";result+="<li style='font-size:19px' >  <br /> <br /></li>";var element=document.getElementById("itemList");element.innerHTML=result,$('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({checkboxClass:"icheckbox_flat-green"})};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductList"}).then(saveItemInformartion,errorCallBack),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/TargetProgrees?productProvider=11&numMonths=9"}).then(setTargetSales,errorCallBack),$scope.targetSales=function(){document.getElementById("drawReport").style.visibility="visible",turnOnMainList("btntargetSales"),document.getElementById("insertCanvas").innerHTML="",fillOptions(),$scope.reportName="Current  Month  sales  vs  Target  sales",$scope.shortdescription=" The graph below compares the selected product’s sales with target sales that you set for this month. Sales are in Rands.",document.getElementById("drawReport").onclick=function(){$scope.reportName="Current  Month  sales  vs  Target  sales",$scope.shortdescription=" The graph below compares the selected product’s sales with target sales that you set for this month. Sales are in Rands.",$scope.drawTargetToCanvas()}},$scope.drawTargetToCanvas=function(){document.getElementById("insertCanvas").innerHTML="<canvas  class='chart' id='canvasData' style='height:385px;width:830px;marign-left:29px;'></canvas>";var responce=$scope.targetInfor,drawItems=[],index=0;for(var tmep in responce.data){for(var check=!1,data=$scope.itemsData.data,c=0;c<data.length;c++)if(data[c].Product_ID===responce.data[index].ProductID){check=document.getElementById("checkbox"+responce.data[index].ProductID).checked,check===!0&&drawItems.push(responce.data[index]),check=!1;break}index++}var labels=[],sales=[],target=[],counter=0;for(var v in drawItems){var temp=drawItems[counter];labels.push(temp.name+" in ZAR"),sales.push(temp.currentSales),target.push(temp.targetSales),counter++}var areaChartData={labels:labels,datasets:[{label:"Sales",fillColor:"#FF9966",strokeColor:"#FF9966",pointColor:"#FF9966",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"#FF9966",data:sales},{label:"Target",fillColor:"rgba(210, 214, 222, 1)",strokeColor:"rgba(210, 214, 222, 1)",pointColor:"rgba(210, 214, 222, 1)",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:target}]};document.getElementById("canvasData").innerHTML=0;var barChartCanvas=$("#canvasData").get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData=areaChartData,color2="#79BEDB";barChartData.datasets[1].fillColor=color2,barChartData.datasets[1].strokeColor=color2,barChartData.datasets[1].pointColor=color2;var barChartOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:8,isFixedWidth:!1,barWidth:10,title:"sacacasc ascacs",legend:{display:!0},tooltips:{enabled:!1},barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',responsive:!0,maintainAspectRatio:!0};barChartOptions.datasetFill=!1,barChart.Bar(barChartData,barChartOptions)};var drawCompareProducts=function(){var datasets=[],counter=0;counter=parseInt(String($scope.product1data.previouse.length))-7,counterp2=parseInt(String($scope.product2data.previouse.length))-7;var name1=$scope.product1data.name+" in ZAR",name2=$scope.product2data.name+" in ZAR";$scope.reportName=$scope.product1data.name+"  Sales vs  "+$scope.product2data.name+"  Sales",$scope.shortdescription=" The graph below compares the two select product sales. The last six months sales together with the forecasted sales of each selected product. Sales are in Rands.";for(var year=6,month=3,str="",n=0;n<6;n++)str=String("201"+String(year)+"-"+String(month)),datasets.push({period:str,licensed:parseFloat($scope.product1data.previouse[counter]).toFixed(2),sorned:parseFloat($scope.product2data.previouse[counterp2]).toFixed(2)}),month++,counter++,counterp2++,12==month&&(year++,month=1);counter=0,canDrawInsuranceType=0;for(var y=0;y<6;y++)str=String("201"+String(year)+"-"+String(month)),datasets.push({period:str,licensed:parseFloat($scope.product1data.predictions[counter]).toFixed(2),sorned:parseFloat($scope.product2data.predictions[counter]).toFixed(2)}),month++,counter++,12==month&&(year++,month=1);new Morris.Line({element:"canvasData",resize:!0,data:datasets,xkey:"period",ykeys:["licensed","sorned"],labels:[name1,name2],lineWidth:2,hideHover:"auto",gridStrokeWidth:.4,pointSize:4,gridTextFamily:"Open Sans",gridTextSize:10})};$scope.compareProuctsCanvas=function(){document.getElementById("drawReport").style.visibility="visible",fillOptions(),turnOnMainList("btnCompareProducts"),document.getElementById("insertCanvas").innerHTML="",$scope.reportName="Compare  Two  Products",$scope.shortdescription=" The graph will  show the two select product sales. The last six months sales together with the forecasted sales of each selected product. Sales are in Rands.",document.getElementById("drawReport").onclick=function(){document.getElementById("insertCanvas").innerHTML="<div  class='chart' id='canvasData' style='height:385px;width:840px;marign-left:29px;'></div>";for(var drawItems=[],index=0,productlist=$scope.itemsData.data,found=0,prod=0;prod<productlist.length&&found<2;prod++){var check=document.getElementById("checkbox"+productlist[index].Product_ID).checked;check===!0&&(found++,drawItems.push(productlist[index].Product_ID)),index++}$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductSalesPredictions?productID="+drawItems[0]+"&numPredictions=7&value1=2&value2=1"}).then(setProduct1,errorCallBack),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductSalesPredictions?productID="+drawItems[1]+"&numPredictions=7&value1=2&value2=1"}).then(setProduct2,errorCallBack)}};var SetinsuranceTypeData=function(responce){$scope.insuranceTypedata=responce.data,drawcurrentMonthInsuranceType(responce.data)};$scope.insuranceTypeSales=function(responce){document.getElementById("drawReport").style.visibility="hidden",document.getElementById("itemList").innerHTML="",document.getElementById("insertCanvas").innerHTML="",$scope.reportName="",turnOnMainList("btnOverallInsuranceTypes"),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getLastMonthInsuranceTypeSales"}).then(SetinsuranceTypeData,errorCallBack)};var drawcurrentMonthInsuranceType=function(responce){$scope.reportName="Current  Month  Insurance  Type  Sales",$scope.shortdescription=" The graph below displays each insurance type sales for the current month. Sales are in Rands",document.getElementById("insertCanvas").innerHTML="<canvas  class='chart' id='canvasData' style='height:385px;width:830px;marign-left:29px;'></canvas>";var labels=[],sales=[],counter=0;for(var v in responce){var temp=responce[counter];labels.push($scope.getType(temp.InsuranceType_ID)),sales.push(temp.monthSales),counter++}var areaChartData={labels:labels,datasets:[{label:"Sales",fillColor:"#FF9966",strokeColor:"#FF9966",pointColor:"#FF9966",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"#FF9966",data:sales}]};document.getElementById("canvasData").innerHTML=0;var barChartCanvas=$("#canvasData").get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData=areaChartData,barChartOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:20,isFixedWidth:!0,barWidth:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',responsive:!0,maintainAspectRatio:!0};barChartOptions.datasetFill=!1,barChart.Bar(barChartData,barChartOptions)},setinsurance1=function(responce){$scope.insurace1data=responce.data,canDrawInsuranceType+=1,canDrawInsuranceType%2===0&&drawCompareInsuranceType()},setinsurance2=function(responce){$scope.insurace2data=responce.data,canDrawInsuranceType+=1,canDrawInsuranceType%2===0&&drawCompareInsuranceType()};$scope.compareInsuranceTypes=function(){fillInsuranceType(),turnOnMainList("btnCompareType"),document.getElementById("insertCanvas").innerHTML="",document.getElementById("insertCanvas").innerHTML="<div  class='chart' id='canvasData' style='height:385px;width:840px;marign-left:29px;'></div>",document.getElementById("drawReport").style.visibility="visible",$scope.reportName="Compare  Insurance  Types  Sales",$scope.shortdescription="The graph below compares two insurance type sales. Its shows sales from the last six and forecasts the next Six.",document.getElementById("drawReport").onclick=function(){for(var drawItems=[],index=0,found=0,prod=0;prod<insurancetypeIDs.length&&found<2;prod++){var check=document.getElementById("checkbox"+insurancetypeIDs[index]).checked;check===!0&&(found++,drawItems.push(insurancetypeIDs[index])),index++}insurnaceTypeSelected=[],insurnaceTypeSelected.push(drawItems[0]),insurnaceTypeSelected.push(drawItems[1]),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/PredictInsuranceTypeSales?insuranceTypeID="+drawItems[0]+"&numPredictions=6&value1=2&value2=1"}).then(setinsurance1,errorCallBack),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/PredictInsuranceTypeSales?insuranceTypeID="+drawItems[1]+"&numPredictions=6&value1=2&value2=1"}).then(setinsurance2,errorCallBack)}};var drawCompareInsuranceType=function(){document.getElementById("insertCanvas").innerHTML="<div  class='chart' id='canvasData' style='height:385px;width:840px;marign-left:29px;'></div>";var datasets=[],counter=1;counter=parseInt(String($scope.insurace1data.previouse.length))-7;var counterp2=parseInt(String($scope.insurace2data.previouse.length))-7,name1=$scope.getType(insurnaceTypeSelected[0])+" in ZAR",name2=$scope.getType(insurnaceTypeSelected[1])+" in ZAR";$scope.reportName=$scope.getType(insurnaceTypeSelected[0])+"  Product  Sales  vs "+$scope.getType(insurnaceTypeSelected[1])+"  Product  Sales",$scope.shortdescription="The graph below compares Two insurance type sales. Its shows sales from the last Six and Forecasts the next Six.";for(var str=(new Date(Date.UTC(2015,1,1)),""),year=6,month=3,n=0;n<6;n++)str=String("201"+String(year)+"-"+String(month)),datasets.push({period:str,licensed:parseFloat($scope.insurace1data.previouse[counter]).toFixed(2),sorned:parseFloat($scope.insurace2data.previouse[counterp2]).toFixed(2)}),counter++,month++,counterp2++,12==month&&(year++,month=1);canDraw=0,counter=0;for(var y=(new Date(Date.UTC(2016,9,1)),0);y<6;y++)str=String("201"+String(year)+"-"+String(month)),datasets.push({period:str,licensed:parseFloat($scope.insurace1data.predictions[counter]).toFixed(2),sorned:parseFloat($scope.insurace2data.predictions[counter]).toFixed(2)}),month++,counter++,12==month&&(year++,month=1);new Morris.Line({element:"canvasData",resize:!0,data:datasets,xkey:"period",ykeys:["licensed","sorned"],labels:[name1,name2],lineWidth:2,hideHover:"auto",gridStrokeWidth:.4,pointSize:4,gridTextFamily:"Open Sans",gridTextSize:10,options:{title:{display:!0,text:"Custom Chart Title"}}})};$scope.viewCurrentMonthProductSales=function(){document.getElementById("drawReport").style.visibility="hidden",document.getElementById("itemList").innerHTML="",turnOnMainList("btnViewCurrentMonth"),$scope.reportName="Current Month Total Product Sales",$scope.shortdescription="The graph below displays the current month’s sales for each product. Sales are in Rands",document.getElementById("insertCanvas").innerHTML="<canvas  class='chart' id='canvasData' style='height:385px;width:830px;marign-left:29px;'></canvas>";var responce=$scope.targetInfor,drawItems=[],index=0;for(var tmep in responce.data)drawItems.push(responce.data[index]),index++;var labels=[],sales=[],target=[],counter=0;for(var v in drawItems){var temp=drawItems[counter];labels.push(temp.name+" in ZAR"),sales.push(temp.currentSales),target.push(temp.targetSales),counter++}var areaChartData={labels:labels,datasets:[{label:"Sales",fillColor:"#FF9966",strokeColor:"00BFFF",pointColor:"#FF9966",pointStrokeColor:"#00BFFF",pointHighlightFill:"#fff",pointHighlightStroke:"#FF9966",data:sales}]};document.getElementById("canvasData").innerHTML=0;var barChartCanvas=$("#canvasData").get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData=areaChartData,barChartOptions={scaleFontSize:0,showXAxisLabel:!1,scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:10,legend:{display:!1},tooltips:{enabled:!1},barDatasetSpacing:50,responsive:!0,maintainAspectRatio:!0};barChartOptions.datasetFill=!1,barChart.Bar(barChartData,barChartOptions)};var turnOnMainList=function(item){for(var linkedList=document.getElementById("menuList"),collection=linkedList.getElementsByTagName("li"),i=1;i<collection.length;i++)collection[i].id!==item?collection[i].className="":collection[i].className="active"}}]),angular.module("myApp").controller("dataAnalytics",["$scope","$http","$compile",function($scope,$http,$compile){function init(){originalData=JSON.parse(httpRequest("GET","http://nanofinapifinal.azurewebsites.net/api/ConsumerProfiles/getConsumerProfileData")),preferences=JSON.parse(httpRequest("GET","http://nanofinapifinal.azurewebsites.net/api/ConsumerProfiles/getPreferencesReports"));for(var i=0;i<originalData.length;i++)originalData[i].topProductCategoriesInterestedIn=String(originalData[i].topProductCategoriesInterestedIn).replace("{",""),originalData[i].topProductCategoriesInterestedIn=String(originalData[i].topProductCategoriesInterestedIn).replace("}",""),originalData[i].topProductCategoriesInterestedIn=String(originalData[i].topProductCategoriesInterestedIn).replace("{",""),originalData[i].topProductCategoriesInterestedIn=String(originalData[i].topProductCategoriesInterestedIn).replace("}",""),filteredData.push(originalData[i]);for(i=0;i<preferences.length;i++)preferences[i].count=0;document.getElementById("btnRefresh").onclick=function(){isfilteringGender.value=document.getElementById("cmbGender").value,isfilteringEmploymentStatus.value=document.getElementById("cmbEmployment").value,isfilteringMaritalStatus.value=document.getElementById("cmbMarital").value,isfilterinhAgeGroup.value=document.getElementById("cmbAgeGroup").value,isfilteringRiskCat.value=document.getElementById("cmbRiskCat").value,FilterAllData()}}function FilterAllData(){isfilteringGender.isFilter="All"!==isfilteringGender.value,isfilteringEmploymentStatus.isFilter="All"!==isfilteringEmploymentStatus.value,isfilteringMaritalStatus.isFilter="All"!==isfilteringMaritalStatus.value,isfilterinhAgeGroup.isFilter="All"!==isfilterinhAgeGroup.value,isfilteringRiskCat.isFilter="All"!==isfilteringRiskCat.value;var filterArr=[isfilteringGender,isfilteringMaritalStatus,isfilteringEmploymentStatus,isfilterinhAgeGroup,isfilteringRiskCat];filteredData=[];for(var c=0;c<originalData.length;c++)filteredData.push(originalData[c]);for(var i=0;i<filterArr.length;i++)filterArr[i].isFilter&&(filteredData=FilterGroup(filteredData,filterArr[i].type,filterArr[i].value));drawConsumerReport(filterArr),drawRiskReports(),drawPerformencesReports()}function drawConsumerReport(filterArr){drawConsumerGenderReports(),drawConsumerMaritalStatusReports(),drawConsumerEmployedReports(),drawConsumerAgeGroupReports(),drawConsumerRiskCatReports()}function drawConsumerGenderReports(){clearGraphCanvas("ConsumerReportGender"),isfilteringGender.isFilter||drawBarGraph("ConsumerReportGender","ConsumerReportMaritalBarChart","#Consumers per Gender ","gender",isfilteringGender.possibleValues,isfilteringGender.possibleValues)}function drawConsumerMaritalStatusReports(){clearGraphCanvas("ConsumerReportMarital"),isfilteringMaritalStatus.isFilter||drawBarGraph("ConsumerReportMarital","consumerMaritalBarChart","#Consumers per Marital Status","maritalStatus",isfilteringMaritalStatus.possibleValues,isfilteringMaritalStatus.possibleValues)}function drawConsumerEmployedReports(){clearGraphCanvas("ConsumerReportEmployment"),isfilteringEmploymentStatus.isFilter||drawBarGraph("ConsumerReportEmployment","consumerEmploymentBarChart","#Consumers per Employment Status","employmentStatus",isfilteringEmploymentStatus.possibleValues,isfilteringEmploymentStatus.possibleValues)}function drawConsumerAgeGroupReports(){if(clearGraphCanvas("ConsumerReportAge"),!isfilterinhAgeGroup.isFilter){var labels=["18-25","26-30","31-39","40-60"];drawBarGraph("ConsumerReportAge","ConsumerReportAgeBarChart","#Consumers per Age Group","ageGroup",isfilterinhAgeGroup.possibleValues,labels)}}function drawConsumerRiskCatReports(){if(clearGraphCanvas("RiskCatReportMarital"),!isfilteringRiskCat.isFilter){var labels=["Low","Moderate","High","Very-High"];drawBarGraph("RiskCatReportMarital","RiskCatReportMaritalBarChart","#Consumers per Risk Category","RiskCategory",isfilteringRiskCat.possibleValues,labels)}}function drawRiskReports(){drawRiskGenderReports(),drawRiskMaritalReports(),drawRiskEmployedReports(),drawRiskAgeGroupReports()}function drawRiskGenderReports(){clearGraphCanvas("RiskReportGender"),isfilteringGender.isFilter||drawRiskBarGraph("RiskReportGender","RiskReportGenderBarChart","Claim Rates(%) per Gender","gender",isfilteringGender.possibleValues,"claimRate",isfilteringGender.possibleValues)}function drawRiskAgeGroupReports(){clearGraphCanvas("RiskReportAge"),isfilterinhAgeGroup.isFilter||drawRiskBarGraph("RiskReportAge","RiskReportMaritalBarChart","Claim Rates(%) per Age Group","ageGroup",isfilterinhAgeGroup.possibleValues,"claimRate",["18-25","26-30","31-39","40-60"])}function drawRiskMaritalReports(){clearGraphCanvas("RiskReportMarital"),isfilteringMaritalStatus.isFilter||drawRiskBarGraph("RiskReportMarital","MaritalReportRiskBarChart","Claim Rates(%) per Marital  Status","maritalStatus",isfilteringMaritalStatus.possibleValues,"claimRate",isfilteringMaritalStatus.possibleValues)}function drawRiskEmployedReports(){clearGraphCanvas("RiskReportEmployment"),isfilteringEmploymentStatus.isFilter||drawRiskBarGraph("RiskReportEmployment","RiskReportEmploymentBarChart","Claim Rates(%) per Employment Status","employmentStatus",isfilteringEmploymentStatus.possibleValues,"claimRate",isfilteringEmploymentStatus.possibleValues)}function AddGraphHtml(chartTitle,chartID,color){var html="";return html+="<div class='box box-"+color+"'>",html+="<div class='box-header with-border'>",html+="<h3 class='box-title'>"+chartTitle+"</h3>",html+="<div class='box-tools pull-right'>",html+="<button type='button' class='btn btn-box-tool' data-widget='collapse'><i class='fa fa-minus'></i></button>",html+="</div>",html+="</div>",html+="<div class='box-body'>",html+="<div class='chart'>",html+="<canvas id='"+chartID+"' style='height:250px'></canvas>",html+="</div>",html+="</div>",html+="<!-- /.box-body -->",html+="</div>"}function FilterGroup(filtered,variableType,request){for(var temp=[],i=0;i<filtered.length;i++)read_prop(filtered[i],variableType)==request&&temp.push(filtered[i]);return temp}function countData(filtered,variableType,request){for(var count=0,i=0;i<filtered.length;i++)read_prop(filtered[i],variableType)==request&&count++;return count}function avgData(filtered,variableType,request,valueToAvg){for(var sum=0,i=0;i<filtered.length;i++)read_prop(filtered[i],variableType)==request&&(sum+=read_prop(filtered[i],valueToAvg));return parseFloat(sum/filtered.length).toFixed(2)}function httpRequest(methode,theUrl){var xmlHttp=new XMLHttpRequest;return xmlHttp.open(methode,theUrl,!1),xmlHttp.send(null),xmlHttp.responseText}function read_prop(obj,prop){return obj[prop]}function clearGraphCanvas(elementID){document.getElementById(elementID).innerHTML="",document.getElementById(elementID).className=""}function drawBarGraph(elementID,graphID,title,type,possibleValues,labelName){document.getElementById(elementID).innerHTML=AddGraphHtml(title,graphID,"primary"),document.getElementById(elementID).className="col col-md-4";for(var dataset=[],i=0;i<possibleValues.length;i++)dataset.push(countData(filteredData,type,possibleValues[i]));var barChartCanvas=$("#"+graphID).get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData={labels:labelName,datasets:[{label:labelName,fillColor:"rgba(60,141,188,0.9)",strokeColor:"rgba(60,141,188,0.8)",pointColor:"#3b8bba",pointStrokeColor:"rgba(60,141,188,1)",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(60,141,188,1)",data:dataset}]};barChartOptions.datasetFill=!1,barChart.Bar(barChartData,barChartOptions)}function drawRiskBarGraph(elementID,graphID,title,type,possibleValues,valueToAvg,labelName){document.getElementById(elementID).innerHTML=AddGraphHtml(title,graphID,"danger"),document.getElementById(elementID).className="col col-md-4";for(var dataset=[],i=0;i<possibleValues.length;i++)dataset.push(avgData(filteredData,type,possibleValues[i],valueToAvg));var barChartCanvas=$("#"+graphID).get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData={labels:labelName,datasets:[{label:labelName,fillColor:"rgba(255,0,0,0.3)",strokeColor:"rgba(255,0,0,0.3)",pointColor:"#3b8bba",pointStrokeColor:"rgba(255,0,0,0.3)",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(255,0,0,0.3)",data:dataset}]};barChartOptions.datasetFill=!1,barChart.Bar(barChartData,barChartOptions)}function drawPerformencesReports(){monthConsumerGroupExpenditure(),popularProducts()}function convert(item){return parseInt(item,10)}function monthConsumerGroupExpenditure(){for(var datapoints=[0,0,0,0,0,0],i=0;i<filteredData.length;i++)for(var temp=filteredData[i].monthPurchases.split(",").map(convert),r=0;r<temp.length&&r<6;r++)datapoints[r]+=temp[r];var graphID="monthlysales";document.getElementById("monthExpenditure").innerHTML=drawLineChart(graphID,"Average monthly sales","success");var dataset=[];for(i=0;i<6;i++)dataset.push({y:"2016-0"+i,item1:parseFloat(datapoints[i]/filteredData.length).toFixed(2)});new Morris.Line({element:graphID,resize:!0,data:dataset,xkey:"y",ykeys:["item1"],labels:["sales"],lineColors:["#3c8dbc"],hideHover:"auto"})}function popularProducts(){for(var countIndex=0,i=0;i<preferences.length;i++)preferences[i].count=0;for(i=0;i<filteredData.length&&2==String(filteredData[i].topProductCategoriesInterestedIn).split(";").length;i++)for(var temp=String(filteredData[i].topProductCategoriesInterestedIn),ids=temp.split(";")[0].split(",").map(convert),pCounts=temp.split(";")[1].split(",").map(convert),r=0;r<preferences.length;r++)countIndex=ids.indexOf(preferences[r].Product_ID),countIndex!=-1&&(preferences[r].count+=pCounts[countIndex]);preferences.sort(function(a,b){return a.count-b.count}),monthlysalesinforBox(preferences,"Units Sold per Product","productName","count")}function drawLineChart(graphID,title,cssColor){var html="";return html+="<div class='box box-"+cssColor+"'>",html+="<div class='box-header with-border'>",html+="<h3 class='box-title'>"+title+"</h3>",html+="<div class='box-tools pull-right'>",html+="<button type='button' class='btn btn-box-tool' data-widget='collapse'><i class='fa fa-minus'></i>",html+="</button>",html+="</div>",html+="</div>",html+="<div class='box-body chart-responsive'>",html+="<div class='chart' id='"+graphID+"' style='height: 300px;'></div>",html+="</div>",html+="</div>"}function monthlysalesinforBox(arr,title,param1,param2){var html="";html="",html+="<div class='box box-widget widget-user' style='width:97%;color:black;margin:1px;border:1px 3399FF;'>",html+="<div class='box-header bg-green'>",html+="<h3 class='box-title'> "+title+"</h3>",html+="",html+="<div class='box-tools pull-right'>",html+="<button type='button' class='btn btn-box-tool' style='color:white;' data-widget='collapse'><i class='fa fa-minus'></i>",html+="</button>",html+="",html+="</div>",html+="</div>",html+="",html+="<div class='box-footer no-padding'>",html+="<ul class='nav nav-pills nav-stacked' style='font-size:15px;width:95%;'>";var ic=0;for(ic=arr.length-1;ic>=0;ic--)html+="<li>"+read_prop(arr[ic],param1)+"<span class='pull-right text-green'><i class='fa fa-angle-up'></i> "+read_prop(arr[ic],param2)+" </span></li>";html+="<li><br/> </li>",html+="</ul>",html+="</div>",html+="</div>",html+="",document.getElementById("PurchasedProducts").innerHTML=html}var originalData=[],filteredData=[],preferences=[],isfilteringGender={isFilter:!1,value:"All",type:"gender",possibleValues:["Male","Female"]},isfilteringMaritalStatus={isFilter:!1,value:"All",type:"maritalStatus",possibleValues:["Married","Single"]},isfilteringEmploymentStatus={isFilter:!1,value:"All",type:"employmentStatus",possibleValues:["Employed","Unemployed"]},isfilterinhAgeGroup={isFilter:!1,value:"All",type:"ageGroup",possibleValues:[2,12,22,32]},isfilteringRiskCat={isFilter:!1,value:"All",type:"RiskCategory",possibleValues:[1,2,3,4]},barChartOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',responsive:!0,maintainAspectRatio:!0};$(document).ready(function(){init(),drawConsumerReport(),drawRiskReports(),monthConsumerGroupExpenditure(),popularProducts()})}]);var app=angular.module("myApp");app.controller("addProductController",["$scope","$http",function($scope,$http){$scope.product={Product_ID:0,ProductProvider_ID:11,ProductType_ID:1,productName:"",productDescription:"",productPolicyDocPath:"c://",isAvailableForPurchase:!0},$scope.InsuranceProduct={InsuranceProduct_ID:0,ProductProvider_ID:11,InsuranceType_ID:0,Product_ID:0,ipCoverAmount:0,ipUnitCost:0,ipUnitType:0,ipMinimunNoOfUnits:0,ipClaimInfoPath:"string",claimtemplate_ID:0},$scope.submitProductChanges=function(){$scope.product.isAvailableForPurchase=document.getElementById("sltAvailable").value;var req={method:"POST",url:"http://nanofinapibetabeta.azurewebsites.net/api/insuranceManager/Postproduct",
headers:{"Content-Type":"application/json; charset=UTF-8"},data:JSON.stringify($scope.product)};$http(req).then(function(responce,status,headers,config){$scope.InsuranceProduct.Product_ID=parseInt(String(headers("location")).replace("http://nanofinapibeta.azurewebsites.net/api/insuranceManager/Postproduct/","")),alert("first item sent")})},$scope.submitInsuranceProductChanges=function(){$scope.InsuranceProduct.InsuranceType_ID=document.getElementById("sltInsuranceType").value,$scope.InsuranceProduct.ipUnitType=document.getElementById("sltInsuranceType").value,$scope.InsuranceProduct.claimtemplate_ID=document.getElementById("sltInsuranceType").value;var req={method:"POST",url:"http://nanofinapibeta.azurewebsites.net/api/insuranceManager/Postinsuranceproduct",headers:{"Content-Type":"application/json; charset=UTF-8"},data:JSON.stringify($scope.InsuranceProduct)};$http(req).then(function(responce){alert("second item sent"),$scope.InsuranceProduct.Product_ID=262})}}]),angular.module("myApp").controller("CompareProducts",["$scope","$http","$compile",function($scope,$http,$compile){$scope.getType=function(insuranceType){return 1==insuranceType?"Assets":2==insuranceType?"Travel":11==insuranceType?"Legal":21==insuranceType?"Medical":31==insuranceType?"Funeral":"Value Added"};var canDraw=0,errorCallBack=function(response){$scope.products=response.data},saveItemInformartion=function(response){$scope.itemsData=response},setTargetSales=function(responce){$scope.targetInfor=responce},setCompareProduct1=function(responce){$scope.product1data=responce.data,alert($scope.product1data.name),canDraw+=1,canDraw%2===0&&drawCompareProducts()},setCompareProduct2=function(responce){$scope.product2data=responce.data,alert($scope.product2data.name),canDraw+=1,canDraw%2===0&&drawCompareProducts()},fillOptions=function(){for(var result="",data=$scope.itemsData.data,c=0;c<data.length;c++)result+="\t<li  style='margin-bottom:9px;width:280px'>",result+="\t<div class='row'>",result+="\t<div class='col-sm-1 col-sm-push-1 removePersonalSpace'>",result+="<label><input type='checkbox' id='checkbox"+data[c].ProductID+"' class='flat-red'></label>",result+="\t</div>",result+="",result+="\t<div class='col-sm-7 col-sm-push-1 removePersonalSpace' style='width:250px'>",result+=String(data[c].name)+" <br />",result+="<span style='font-size:12px'>"+$scope.getType(data[c].insuranceType)+"</span>",result+="</div>",result+="</div>",result+="</li>";result+="<li style='font-size:19px' >  <br /> <br /></li>";var element=document.getElementById("itemList");element.innerHTML=result,$('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({checkboxClass:"icheckbox_flat-green"})};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductList"}).then(saveItemInformartion,errorCallBack),$scope.targetSales=function(){fillOptions(),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/TargetProgrees?productProvider=11&numMonths=1"}).then(setTargetSales,errorCallBack)},$scope.drawToCanvas=function(){document.getElementById("insertCanvas").innerHTML="<canvas  class='chart' id='canvasData' style='height:395px;width:830px;marign-left:29px;'></canvas>";var responce=$scope.targetInfor,drawItems=[],index=0,i=0;for(var tmep in responce.data){var check=document.getElementById("checkbox"+responce.data[index].ProductID).checked;check===!0&&(i++,drawItems.push(responce.data[index])),index++}var labels=[],sales=[],target=[],counter=0;for(var v in drawItems){var temp=drawItems[counter];labels.push(temp.name),sales.push(temp.currentSales),target.push(temp.targetSales),counter++}var areaChartData={labels:labels,datasets:[{label:"Sales",fillColor:"rgba(210, 214, 222, 1)",strokeColor:"rgba(210, 214, 222, 1)",pointColor:"rgba(210, 214, 222, 1)",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:sales},{label:"Target",fillColor:"rgba(210, 214, 222, 1)",strokeColor:"rgba(210, 214, 222, 1)",pointColor:"rgba(210, 214, 222, 1)",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:target}]};document.getElementById("canvasData").innerHTML=0;var barChartCanvas=$("#canvasData").get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData=areaChartData;barChartData.datasets[1].fillColor="#00a65a",barChartData.datasets[1].strokeColor="#00a65a",barChartData.datasets[1].pointColor="#00a65a";var barChartOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:8,isFixedWidth:!1,barWidth:10,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',responsive:!0,maintainAspectRatio:!0};barChartOptions.datasetFill=!1,barChart.Bar(barChartData,barChartOptions)};var drawCompareProducts=function(){var labels=[],p1=[],p2=[],counter=0;alert("compare product");for(var t in $scope.product1data.predictions)p1.push($scope.product1data.predictions[counter]),counter++;counter=0;for(var y in $scope.product2data.predictions)p2.push($scope.product2data.predictions[counter]),counter++,labels.push("2016 - "+counter);var color1="#d35400",color2="#f1c40f",areaChartData={labels:labels,datasets:[{label:"Sales",fillColor:color1,strokeColor:color1,pointColor:color1,pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:color1,data:p1},{label:"Target",fillColor:color2,strokeColor:color2,pointColor:color2,pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:color2,data:p2}]},barChartCanvas=$("#canvasData").get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData=areaChartData,barChartOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:10,isFixedWidth:!1,barWidth:15,barDatasetSpacing:5,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',responsive:!0,maintainAspectRatio:!0};barChartOptions.datasetFill=!1,barChart.Bar(barChartData,barChartOptions)};$scope.compareProuctsCanvas=function(){fillOptions(),document.getElementById("insertCanvas").innerHTML="<canvas  class='chart' id='canvasData' style='height:395px;width:840px;marign-left:29px;'></canvas>";for(var drawItems=[],index=0,i=0,productlist=$scope.itemsData.data,found=0,prod=0;prod<productlist.length||0===found;prod++){var check=document.getElementById("checkbox"+productlist[index].ProductID).checked;check===!0&&(i++,found++,alert(productlist[index].ProductID),drawItems.push(productlist[index].ProductID)),index++}$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductSalesPredictions?productID="+drawItems[0]+"&numPredictions=5"}).then(setCompareProduct1,errorCallBack),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductSalesPredictions?productID="+drawItems[1]+"&numPredictions=5"}).then(setCompareProduct2,errorCallBack)};$scope.CompareProductTyeSales=function(){fillProductSales(),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductList"}).then(saveItemInformartion,errorCallBack)},$scope.ForecastProductSales=function(){},$scope.CompareProductTypeForecast=function(){$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getProductList"}).then(saveItemInformartion,errorCallBack)}}]),angular.module("myApp").controller("dashboard",["$scope","$http","$log",function($scope,$http,$log){var BestProductSuccess=function(responce){var data=responce.data,currentBest=data[0],currentWorst=data[0],counter=0;for(var p in data)parseInt(responce.data[counter].overallUsage)>parseInt(currentBest.overallUsage)?currentBest=data[counter]:parseInt(responce.data[counter].overallUsage)<parseInt(currentWorst.overallUsage)&&(currentWorst=data[counter]),counter++;$scope.bestProduct=currentBest,$scope.worstProduct=currentWorst},successCallBack=function(response){var datasets=[],str="",month=3,data=response.data,counter=0;for(var y in data)str=String("2015-09-"+String(month)),datasets.push({period:str,licensed:parseFloat(data[counter].sales).toFixed(2)}),month++,counter++;0===$scope.salesToday&&(cost=data[counter-1].sales);new Morris.Line({element:"canvasData",resize:!0,data:datasets,xkey:"period",ykeys:["licensed"],labels:["2Help1 sales"],lineWidth:2,hideHover:"auto",gridStrokeWidth:.4,pointSize:4,gridTextFamily:"Open Sans",gridTextSize:10,options:{title:{display:!0,text:"Custom Chart Title"}}})},setDashBoardCards=function(responce){$scope.monthsales=responce.data.monthsales.toMoney(),$scope.yearSale=responce.data.yearSale.toMoney(),$scope.numMembers=responce.data.numMembers,$scope.claims=responce.data.claims,0===responce.data.salesToday?$scope.salesToday=216.2:$scope.salesToday=responce.data.salesToday},errorCallBack=function(response){$scope.insuranceProductList=response.data},unprocessedApplications=function(response){$scope.unprocessedApplications=response.data};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/Reports/getDashboard?productProviderID=11"}).then(setDashBoardCards,errorCallBack),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/Reports/getBestSellingProduct"}).then(BestProductSuccess,errorCallBack),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/ReportsMaster/getCurrentMonthDailySales"}).then(successCallBack,errorCallBack),$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/Reports/getNumberOfUnprocessedApplications?ProviderID=11"}).then(unprocessedApplications,errorCallBack),Number.prototype.toMoney=function(decimals,decimal_sep,thousands_sep){var n=this,c=isNaN(decimals)?2:Math.abs(decimals),d=decimal_sep||".",t="undefined"==typeof thousands_sep?",":thousands_sep,sign=n<0?"-":"",i=parseInt(n=Math.abs(n).toFixed(c))+"",j=(j=i.length)>3?j%3:0;return sign+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"")}}]),angular.module("myApp").controller("viewInsuranceProducts",["$scope","$http",function($scope,$http){var errorCallBack=function(response){$scope.insuranceProductList=response.data},successCallBack=function(response){$scope.insuranceProductList=response.data;var Asset=[],Travel=[],Legal=[],Medical=[],Funeral=[],ValueAdded=[];data=response.data;for(var c=0;c<data.length;c++)"Asset"==response.data[c].typeOfInsurance&&Asset.push(data[c]),"Travel"==response.data[c].typeOfInsurance&&Travel.push(data[c]),"Legal"==response.data[c].typeOfInsurance&&Legal.push(data[c]),"Medical"==response.data[c].typeOfInsurance&&Medical.push(data[c]),"Funeral"==response.data[c].typeOfInsurance&&Funeral.push(data[c]),"Value Added Services"==response.data[c].typeOfInsurance&&ValueAdded.push(data[c]);$scope.Asset=Asset,$scope.Travel=Travel,$scope.Legal=Legal,$scope.Medical=Medical,$scope.Funeral=Funeral,$scope.valueAdded=ValueAdded};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/insuranceManager/Getinsuranceproducts?ProductProviderID=11"}).then(successCallBack,errorCallBack)}]),angular.module("myApp").controller("processBatchApplications",["$scope","$http","$compile","$window",function($scope,$http,$compile,$window){function addRowHandlers(event){id=String(this.id).replace("btnView",""),selectedCons=id,$scope.viewModal(id)}function redirectToClientPage(event){var cid=String(this.id).replace("btnProcess","");$window.location.href="/ProcessSingleApplication?cid="+cid}function generateBtn(id){var html="<div class='btn-group'>";return html+="<button type='button' id='btnView"+id+"' class='btn btn-default '><i class='fa fa-info' style='color:blue;'></i></button>",html+="<button type='button' id='btnProcess"+id+"' class='btn btn-default'>Process</button>",html+="</div>"}function findConsumerApp(ID){var i=0;for(var r in unprocessedList){if(unprocessedList[i].idConsumer==ID)return unprocessedList[i];i++}return unprocessedList[0]}function getAgeCat(id){return 2==id?"18-25":12==id?"26-30":22==id?"31-49":32==id?"40-60":void 0}var table,unprocessedList,id,selectedCons=11;angular.element(document).ready(function(){table=$("#tblApplications").DataTable({paging:!0,lengthChange:!1,searching:!0,ordering:!0,info:!0,autoWidth:!1,columns:[{data:"icon"},{data:"idConsumer"},{data:"clientName"},{data:"numUnprocessed"},{data:"RiskCategory"},{data:"options"}]})});var errorCallBack=function(response){$scope.uprocessedApplications=response.data},successCallBack=function(response){unprocessedList=response.data;var counter=0;for(var r in unprocessedList){var riskCat=unprocessedList[counter].RiskCategory;1==riskCat?unprocessedList[counter].icon="<i class='fa fa-fw fa-user' style='color:green;'></i> ":2==riskCat?unprocessedList[counter].icon="<i class='fa fa-fw fa-user' style='color:yellow;'></i> ":3==riskCat?unprocessedList[counter].icon="<i class='fa fa-fw fa-user' style='color:orange;'></i> ":unprocessedList[counter].icon="<i class='fa fa-fw fa-user' style='color:red;'></i> ",unprocessedList[counter].options=generateBtn(unprocessedList[counter].idConsumer),counter++}table.rows.add(unprocessedList),table.draw(),$("#tblApplications").on("draw.dt",function(evet){createButtonEvents()}),createButtonEvents()};$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/ProcessInsuranceApplications/getUnprocessedApplications"}).then(successCallBack,errorCallBack);var createButtonEvents=function(){var table1=document.getElementById("tblApplications"),rows=table1.getElementsByTagName("tr");for(i=1;i<rows.length;i++){var currentRow=table1.rows[i],cell=currentRow.getElementsByTagName("td")[1];id=cell.innerHTML,document.getElementById("btnView"+id).onclick=addRowHandlers,document.getElementById("btnProcess"+id).onclick=redirectToClientPage}};$scope.viewModal=function(index){var user=findConsumerApp(index),html="";html+="<div class='modal fade' id='myModal' tabindex='-1' role='dialog' aria-labelledby='myModalLabel'>",html+="<div class='modal-dialog' role='document' style='width:700px;height:700px;'>",html+="<div class='modal-content'>",html+="<div class='modal-header'>",html+="<button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>",html+="<h4 class='modal-title' id='myModalLabel'><strong>Applicant No #"+user.idConsumer+"</strong></h4>",html+="</div>",html+="<div class='modal-body'>",html+="<div class='row'>",html+="<br/>",html+="<div class='col col-sm-6'>",html+="<div class='row'>",html+="<div class='form-group'>",html+="<label for='txtIDno' class='col-sm-6 control-label'>Age Group :</label>",html+="<div class='col-sm-6'>"+getAgeCat(user.ageGroup)+"</div>",html+="<br />",html+="<div class='col-sm-10'>",html+="<label id='txtIDno' class='col-sm-9 control-label'>+"+user.ageRiskValue+" Risk-Load</label>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",html+="<div class='col col-sm-6'>",html+="<div class='row'>",html+="<div class='form-group'>",html+="<label for='txtAddress' class='col-sm-6 control-label'>Gender :</label>",html+="<div  class='col-sm-6'>"+user.gender+"</div>",html+="<br />",html+="<div class='col-sm-10'>",html+="<label id='txtAddress' class='col-sm-9 control-label'>+"+user.genderRiskValue+" Risk-Load</label>",html+="</div>",html+="<br />",html+="</div>",html+="</div>",html+="</div>",html+="<div class='col col-sm-6'>",html+="<div class='row'>",html+="<div class='form-group'>",html+="<br />",html+="<label for='txtProductPurchase' class='col-sm-6 control-label'>Marital Status :</label>",html+="<div class='col-sm-6'>"+user.maritalStatus+"</div>",html+="<br />",html+="<div class='col-sm-10'>",html+="<label id='txtProductPurchase' class='col-sm-9 control-label'>+"+user.maritalStatusRiskValue+" Risk-Load</label>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",html+="<div class='col col-sm-6'>",html+="<div class='row'>",html+="<div class='form-group'>",html+="<br />",html+="<label for='txtStartDate' class='col-sm-6 control-label'>Claim Rate :</label>",html+="<div class='col-sm-6'>"+user.claimRate+"%</div>",html+="<br />",html+="<div class='col-sm-10'>",html+="",html+="<label id='txtStartDate' class='col-sm-9 control-label'>+"+user.claimRate+" Risk-Load</label>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",html+="<br />",html+="<div class='col col-sm-6'>",html+="<div class='row'>",html+="<div class='form-group'>",html+="<br />",html+="<div class='col-sm-6 control-label'><strong>Work Status :</strong></div>",html+="<div  class='col-sm-6'>"+user.employmentStatus+"</div>",html+="<br />",html+="<div class='col-sm-10'>",html+="<label id='txtStartDate' class='col-sm-9 control-label'>+"+user.employmentStatusRiskValue+" Risk-Load</label>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",html+="<hr /> ",html+="<h4><strong>Products Await Approval</strong></h4>",html+="<small> please select the products you wish process </small>",html+="<br />";var list=String(user.purchasedProducts).split(";"),idList=String(user.purchasedProductIDs).split(";");for(index=0;index<list.length;index++){if(html+="<div class='row'>",html+="<div  class='col-sm-5' style='margin:7px;'",html+="<label><input type='checkbox' id='checkbox"+idList[index]+"' class='flat-red'><i class='fa fa-fw fa-shopping-cart'></i> "+list[index]+"</label>",html+="</div>",index++,index>=list.length){html+="</div";break}html+="<div  class='col-sm-5' style='margin:7px;'",html+="<label><input type='checkbox' id='checkbox"+idList[index]+"' class='flat-red'><i class='fa fa-fw fa-shopping-cart'></i> "+list[index]+"</label>",html+="</div>",html+="</div",html+=""}html+="<br />",html+="<br />",html+="<br />",html+="<br />",html+="</div>",html+="<div class='modal-footer'>",html+="<div class='row'>",html+="<div class='col-sm-4 '>",html+="<button type='button' class='btn btn-danger ' data-dismiss='modal'>Close Application</button>",html+="</div>",html+="<div class='col-sm-4 col-sm-push-4'>",html+="<button type='button' id='btnModalApprove"+user.idConsumer+"' class='btn btn-success'>Approve Application</button>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",html+="</div>",$("#processApplicationModal").html(html),$("#myModal").modal(),$('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({checkboxClass:"icheckbox_flat-green"});var modalButton=document.getElementById("btnModalApprove"+user.idConsumer);modalButton.onclick=function(){var buttonID=String(this.id).replace("btnModalApprove","");findConsumerApp(buttonID);for(var idList=String(user.purchasedProductIDs).split(";"),i=0;i<idList.length;i++){var check=document.getElementById("checkbox"+idList[i]).checked;check&&$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/ProcessInsuranceApplications/ProcessSingleApplication?activeProductID="+idList[i]})}table.clear(),$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/ProcessInsuranceApplications/getUnprocessedApplications"}).then(function(responce){successCallBack(responce),$("#myModal").modal("hide")})}}}]),angular.module("myApp").directive("fileInput",["$parse",function($parse){return{restrict:"A",link:function(scope,element,attrs){element.bind("change",function(){$parse(attrs.fileInput).assign(scope,element[0].files),scope.$apply()})}}}]).controller("processClaimsCtrl",["$scope","$http","$compile","$window","$log","$routeParams",function($scope,$http,$compile,$window,$log,$routeParams){$scope.apiBaseUrl="http://nanofinapifinal.azurewebsites.net";var CID=location.search.split("cid=")[1];$scope.claimID=CID,$scope.claimForm="",$scope.nothingsBeenSelected=!0,$scope.showClaimForm=!1,$scope.showDoc=!1,$scope.StatusNotFinalized=!1,$scope.claimEntity={Claim_ID:0,ActiveProductItems_ID:0,capturedClaimFormDataJson:"string",claimDate:"2016-10-15T18:07:24.507Z",claimStatus:"null",claimPaymentFinalised:"false",Consumer_ID:0},$scope.uploading=!1;var getSingleClaimToBeProcessed=function(){$http({method:"GET",url:"http://nanofinapifinal.azurewebsites.net/api/Claim/getSingleClaimToBeProcessed?claimID="+$scope.claimID}).then(function(response){var vClaimToBeProcessed=response.data;$scope.ClaimToBeProcessed=vClaimToBeProcessed,$scope.claimForm=angular.fromJson(vClaimToBeProcessed.capturedClaimFormData),$scope.firstStepFields=$scope.claimForm[0].fields,$scope.secondStepFields=$scope.claimForm[1].fields,$scope.claimID=vClaimToBeProcessed.claimID,$scope.claimDate=vClaimToBeProcessed.claimDate,$scope.consumerName=vClaimToBeProcessed.consumerName,$scope.consumerSurname=vClaimToBeProcessed.consumerSurname,$scope.activeProdID=vClaimToBeProcessed.activeProductID,$scope.productName=vClaimToBeProcessed.productName,$scope.claimStatus=vClaimToBeProcessed.claimStatus,$scope.claimPaymentFinalised=vClaimToBeProcessed.claimPaymentFinalised,$scope.consumerContactNumber=vClaimToBeProcessed.contactNumber,$log.info(response)},function(reason){$log.info(reason)})};getSingleClaimToBeProcessed(),$scope.viewClaimForm=function(){$scope.nothingsBeenSelected=!1,$scope.showDoc=!1,$scope.showClaimForm=!0};var getClaimDocsPath=function(){$http({method:"GET",url:"http://nanofinapifinal.azurewebsites.net/api/Claim/getClaimUploadedDocsPath?ClaimID="+$scope.claimID}).then(function(response){var vClaimDocsPath=response.data;$scope.claimDocsPath=vClaimDocsPath,$scope.claimDocsLongPath="http://nanofinapifinal.azurewebsites.net"+vClaimDocsPath,$http({method:"GET",url:"http://nanofinapifinal.azurewebsites.net/api/FileUpload/getFileInfoInDirectory?filepath="+$scope.claimDocsPath}).then(function(response){var vClaimDocs=response.data;$scope.claimDocumentsInDir=vClaimDocs,$log.info(response)},function(reason){$log.info(reason)}),$log.info(response)},function(reason){$log.info(reason)})};getClaimDocsPath(),$scope.showDocPreview=function(filename){$scope.currentDocPath=$scope.claimDocsLongPath+"/"+filename,$scope.nothingsBeenSelected=!1,$scope.showClaimForm=!1,$scope.showDoc=!0};var fd=new FormData;$scope.upload=function(files){if($scope.uploading=!0,console.log(files),0===files.length)return alert("No files selected!"),void($scope.uploading=!1);for(var i=0;i<files.length;i++){var fsize=files.item(i).size;if(console.log("file size:"+fsize),fsize/1024>=2048)return $scope.showMaxFileSizeAlert(),void($scope.uploading=!1);var fileExtension=$scope.getFileExt(files.item(i).name);if("exe"===fileExtension)return alert("Don't allow this file type!"),void($scope.uploading=!1)}angular.forEach(files,function(value,key){fd.append(key,value)}),$http.post($scope.apiBaseUrl+"/api/FileUpload/uploadToNewDirectory?strDirectory=claims/"+$scope.productName+"/"+$scope.activeProdID,fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){$scope.uploading=!1,alert("Files uploaded successfully!"),console.log(d)}).error(function(){$scope.uploading=!1,alert("Failed!")})},$scope.showMaxFileSizeAlert=function(){alert("The size of one or more files is more than 2 MiB, please try again")},$scope.getFileExt=function(string){var array=string.split(".");return array[1]},$scope.submitClaimProcess=function(){$scope.submitLoading=!0,$http({method:"PUT",url:"http://nanofinapifinal.azurewebsites.net/api/Claim/updateClaimStatus?ClaimID="+$scope.claimID+"&status="+$scope.claimEntity.claimStatus}).then(function(response){$log.info(response)},function(reason){$log.info(reason)}),$http({method:"PUT",url:"http://nanofinapifinal.azurewebsites.net/api/Claim/updateClaimPaymentStatus?ClaimID="+$scope.claimID+"&paymentStatus="+$scope.claimEntity.claimPaymentFinalised}).then(function(response){$log.info(response)},function(reason){$log.info(reason)}),"Rejected"===$scope.claimEntity.claimStatus&&($scope.rejected=!0,$scope.modalHeader="Claim Rejected",$scope.modalMessage="A notification message will be sent to the user",$("#myModal").modal(),$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/Notification/SendSMS?toPhoneNum="+$scope.consumerContactNumber+"&message=Your claim for: "+$scope.productName+" reference number: "+$scope.claimID+$scope.activeProdID+" has been rejected, 2Help1 will contact you shortly. "}).then(function(response){console.log("sent sms to: "+$scope.consumerContactNumber+"with message: "+message),$log.info(response)},function(reason){console.log("failed to send sms"),$log.info(reason)})),"Accepted"===$scope.claimEntity.claimStatus&&($scope.rejected=!1,$scope.modalHeader="Claim Accepted",$scope.modalMessage="This claim will be marked as accepted and the supplied proof documentation will be made available to the user.",$("#myModal").modal()),"In Progress"===$scope.claimEntity.claimStatus&&($scope.rejected=!1,$scope.modalHeader="Claim still In Progress",$scope.modalMessage="This claim will remain on the list of claims that need further processing.",$("#myModal").modal())},$scope.isClaimStatusRejectedOrInProg=function(){return"Rejected"===$scope.claimEntity.claimStatus||"In Progress"===$scope.claimEntity.claimStatus||"null"===$scope.claimEntity.claimStatus},$scope.modalDismissed=function(){window.location="/viewClaims"},$scope.genPDF=function(){html2canvas(document.getElementById("claimfrm"),{onrendered:function(canvas){var data=canvas.toDataURL(),docDefinition={content:[{image:data,width:500}]};pdfMake.createPdf(docDefinition).download("#"+$scope.claimID+$scope.activeProdID+".pdf")}})}}]),angular.module("myApp").controller("processConsumerApplicationCtr",["$scope","$http",function($scope,$http){function purchaseCallBack(responce){var unprocessedList=responce.data,counter=0,html="";for(var p in unprocessedList)html+="<div class='col-lg-6 col-xs-6'>",html+="<div class='small-box bg-blue'>",html+="",html+="<div class='inner'>",html+="<h4>"+unprocessedList[counter].productName+"</h4>",html+="",html+="<p>purchased "+unprocessedList[counter].datum+"</p>",html+="<span class='pull-left'>",html+="<button type='button' class='btn btn-success' id='btGrant"+unprocessedList[counter].ActiveProductItems_ID+"'>Grant</button>",html+="</span>",html+="<span class='pull-right'>",html+="<button type='button' class='btn btn-danger'id='btnDecline"+unprocessedList[counter].ActiveProductItems_ID+"'>Decline</button>",html+="</span>",html+="<br />",html+="<br />",html+="</div>",html+="</div>",html+="</div>",counter++;document.getElementById("unprocessedProds").innerHTML=html,counter=0;for(var g in unprocessedList)document.getElementById("btGrant"+unprocessedList[counter].ActiveProductItems_ID).onclick=GrantProduct,counter++;counter=0;for(var r in unprocessedList)document.getElementById("btnDecline"+unprocessedList[counter].ActiveProductItems_ID).onclick=GrantProduct,counter++}function GrantProduct(event){var activeProdID=String(this.id).replace("btGrant","");$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/ProcessInsuranceApplications/processApplicationNativeImp?activeProductID="+activeProdID}).then(function(responce){responce.data===!0&&$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/ProcessInsuranceApplications/getConsummerUnProccessedPurchases?idConsumer="+CID}).then(purchaseCallBack,PerrorCallBack)})}var CID=location.search.split("cid=")[1],PerrorCallBack=function(response){$scope.user=response.data},PsuccessCallBack=function(response){$scope.user=response.data,$scope.pageHeader="#"+$scope.user.idConsumer+" "+$scope.user.clientName,$scope.location=$scope.user.residentTown,$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/ProcessInsuranceApplications/getConsummerUnProccessedPurchases?idConsumer="+CID}).then(purchaseCallBack,PerrorCallBack)};$http({method:"POST",url:"http://nanofinapifinal.azurewebsites.net/api/ProcessInsuranceApplications/getUserInformation?idConsumer="+CID}).then(PsuccessCallBack,PerrorCallBack)}]),angular.module("myApp").controller("productManagement",["$scope","$http",function($scope,$http){var ID,insuranceProdID,VID=location.search.split("vid=")[1],PerrorCallBack=function(response){$scope.product=response.data},PsuccessCallBack=function(response){$scope.product=response.data,document.getElementById("sltAvailable").value=$scope.product.isAvailableForPurchase,$scope.pageHeader=$scope.product.productName,ID=$scope.product.Product_ID};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/insuranceManager/Getproduct/"+VID}).then(PsuccessCallBack,PerrorCallBack);var IPerrorCallBack=function(response){$scope.InsuranceProduct=response.data},IPsuccessCallBack=function(response){$scope.InsuranceProduct=response.data,insuranceProdID=$scope.InsuranceProduct.InsuranceProduct_ID,document.getElementById("sltInsuranceType").value=$scope.InsuranceProduct.InsuranceType_ID,document.getElementById("sltInsuranceType").value=$scope.InsuranceProduct.InsuranceType_ID};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/insuranceManager/Getinsuranceproduct?ProductProviderID=11&InsuranceProduct_ID=91"}).then(IPsuccessCallBack,IPerrorCallBack),$scope.submitProductChanges=function(){var xhr=new XMLHttpRequest;xhr.open("PUT","http://nanofinapibeta.azurewebsites.net/api/insuranceManager/Putproduct/"+ID,!0),xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"),xhr.send(JSON.stringify($scope.product)),xhr.onloadend=function(){}},$scope.submitInsuranceProductChanges=function(){var xhr=new XMLHttpRequest;xhr.open("PUT","http://nanofinapibeta.azurewebsites.net/api/insuranceManager/Putinsuranceproduct?InsuranceProduct_ID="+insuranceProdID,!0),xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8"),xhr.send(JSON.stringify($scope.InsuranceProduct)),xhr.onloadend=function(){}},$scope.SendFile=function(){var f=document.getElementById("file1").files[0],r=new FileReader;r.onloadend=function(e){e.target.result;alert(e.target.fileName)},alert(e.target.fileName),r.readAsBinaryString(f)}}]),angular.module("myApp").controller("reportsController",["$scope","$http","$compile",function($scope,$http,$compile){var table,unprocessedList;angular.element(document).ready(function(){table=$("#tblApplications").DataTable({paging:!0,lengthChange:!1,searching:!0,ordering:!0,info:!0,autoWidth:!1,columns:[{data:"index"},{data:"month"},{data:"NumberofPurchases"},{data:"unitsSold"},{data:"OverallSales"}]})});var errorCallBack=function(response){$scope.uprocessedApplications=response.data},successCallBack=function(response){unprocessedList=response.data,table.rows.add(unprocessedList),table.draw()};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/Reports/getInvoices?providerID=11"}).then(successCallBack,errorCallBack);var ProductSales=function(response){var labels=[],values=[];labels.push(""),values.push(1);var counter=0;for(var v in response.data)labels.push(response.data[counter].name),values.push(response.data[counter].overallUsage),counter++;var areaChartData={labels:labels,datasets:[{label:labels,fillColor:"rgba(210, 214, 222, 1)",strokeColor:"rgba(210, 214, 222, 1)",pointColor:"rgba(210, 214, 222, 1)",pointStrokeColor:"#c1c7d1",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:values}]},barChartCanvas=$("#barChart").get(0).getContext("2d"),barChart=new Chart(barChartCanvas),barChartData=areaChartData;barChartData.datasets[0].fillColor="#00a65a",barChartData.datasets[0].strokeColor="#00a65a",barChartData.datasets[0].pointColor="#00a65a";var barChartOptions={scaleFontSize:0,showXAxisLabel:!1,scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",
scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:10,legend:{display:!1},tooltips:{enabled:!1},barDatasetSpacing:50,responsive:!0,maintainAspectRatio:!0};barChartOptions.datasetFill=!0,barChart.Bar(barChartData,barChartOptions)};$http({method:"GET",url:"http://nanofinapibeta.azurewebsites.net/api/Reports/getBestSellingProduct"}).then(ProductSales,errorCallBack)}]),angular.module("myApp").filter("payedYesOrNo",function(){return function(x){return"false"===x?"No":"true"===x?"Yes":void 0}}).controller("viewClaimsCtrl",["$scope","$http","$compile","$window","$log",function($scope,$http,$compile,$window,$log){$scope.downloadFile=function(){window.open("http://localhost:14198/api/FileUpload/GetTestFile","_blank","")},$scope.test="test",$scope.searchClaim="",$scope.sort=function(keyname){$scope.sortKey=keyname,$scope.reverse=!$scope.reverse};var getClaimsToBeProcessed=function(){$http({method:"GET",url:"http://nanofinapifinal.azurewebsites.net/api/Claim/viewClaimsToBeProcessed"}).then(function(response){var vClaimsToBeProcessed=response.data;$scope.ClaimsToBeProcessed=vClaimsToBeProcessed,$log.info(response)},function(reason){$log.info(reason)})};getClaimsToBeProcessed()}]),angular.module("myApp").controller("validateUsers",["$scope","$http","$compile",function($scope,$http,$compile){var table,unprocessedList;angular.element(document).ready(function(){table=$("#tblApplications").DataTable({paging:!0,lengthChange:!1,searching:!0,ordering:!0,info:!0,autoWidth:!1,columns:[{data:"userID"},{data:"brankNo"},{data:"name"},{data:"IDNumber"},{data:"bankName"},{data:"accountNo"},{data:"address"},{data:"contactInfo"}]})});var errorCallBack=function(response){$scope.uprocessedApplications=response.data},successCallBack=function(response){unprocessedList=response.data;var counter=0;for(var p in unprocessedList)unprocessedList[counter].brankNo="Pending",counter++;table.rows.add(unprocessedList),table.draw()};$http({method:"GET",url:"http://nanofinapi.azurewebsites.net/api/Validator/getUnValidatedUsers"}).then(successCallBack,errorCallBack)}]),angular.module("myApp").controller("customerCtrl",["$scope","$http","$log",function($scope,$http,$log){$http({method:"GET",url:"http://nanofinapi.azurewebsites.net/api/TestManager/Getinsurancetype"}).then(function(response){$scope.insuranceTypes=response.data},function(){$log.info("ERROR:"+reason)})}]),angular.module("myApp").controller("insuranceProd",["$scope","$http",function($scope,$http){var errorCallBack=function(response){$scope.insuranceProductList=response.data},successCallBack=function(response){$scope.insuranceProductList=response.data};$http({method:"GET",url:"http://nanofinapi.azurewebsites.net/api/insuranceManager/Getinsuranceproducts?ProductProviderID=11"}).then(successCallBack,errorCallBack)}]),angular.module("myApp").controller("loginCtrl",["$scope","$http",function($scope,$http){$scope.login=function(){alert("I am an alert box!")}}]),angular.module("myApp").controller("mapController",["$scope","$http","NgMap",function($scope,$http,NgMap){$scope.googleMapsUrl="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaVSsJenH6dgcBdRY4pWilPBFIDTsY8us",NgMap.getMap().then(function(map){})}]),angular.module("myApp").controller("resellerCtrl",["$scope","$http","$log",function($scope,$http,$log){var errorCallBack=function(response){$log.info("ERROR:"+reason)},successCallBack=function(response){$log.info("SUCCESS:"+reason)};$scope.buyBulk=function(amount,resellerID){$http({method:"POST",url:"http://localhost:10812/api/WalletHandler/buyBulkVoucher?userID=33&resellerID=1&BulkVoucherAmount="+amount+"&transactionType_ID=1"}).then(successCallBack,errorCallBack)},$scope.sendBulkVoucher=function(amount,resellerUserID,recipienDetails){$http({method:"POST",url:"http://localhost:10812/api/WalletHandler/sendBulkVoucher?resellerUserID="+resellerUserID+"&recipientDetails="+recipienDetails+"&transferAmount="+amount}).then(successCallBack,errorCallBack)}}]),function(){"use strict";function FastClick(layer,options){function bind(method,context){return function(){return method.apply(context,arguments)}}var oldOnClick;if(options=options||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=options.touchBoundary||10,this.layer=layer,this.tapDelay=options.tapDelay||200,this.tapTimeout=options.tapTimeout||700,!FastClick.notNeeded(layer)){for(var methods=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],context=this,i=0,l=methods.length;i<l;i++)context[methods[i]]=bind(context[methods[i]],context);deviceIsAndroid&&(layer.addEventListener("mouseover",this.onMouse,!0),layer.addEventListener("mousedown",this.onMouse,!0),layer.addEventListener("mouseup",this.onMouse,!0)),layer.addEventListener("click",this.onClick,!0),layer.addEventListener("touchstart",this.onTouchStart,!1),layer.addEventListener("touchmove",this.onTouchMove,!1),layer.addEventListener("touchend",this.onTouchEnd,!1),layer.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;"click"===type?rmv.call(layer,type,callback.hijacked||callback,capture):rmv.call(layer,type,callback,capture)},layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;"click"===type?adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){event.propagationStopped||callback(event)}),capture):adv.call(layer,type,callback,capture)}),"function"==typeof layer.onclick&&(oldOnClick=layer.onclick,layer.addEventListener("click",function(event){oldOnClick(event)},!1),layer.onclick=null)}}var deviceIsWindowsPhone=navigator.userAgent.indexOf("Windows Phone")>=0,deviceIsAndroid=navigator.userAgent.indexOf("Android")>0&&!deviceIsWindowsPhone,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent)&&!deviceIsWindowsPhone,deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS [6-7]_\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(target){switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===target.type||target.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(target.className)},FastClick.prototype.needsFocus=function(target){switch(target.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}},FastClick.prototype.sendClick=function(targetElement,event){var clickEvent,touch;document.activeElement&&document.activeElement!==targetElement&&document.activeElement.blur(),touch=event.changedTouches[0],clickEvent=document.createEvent("MouseEvents"),clickEvent.initMouseEvent(this.determineEventType(targetElement),!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),clickEvent.forwardedTouchEvent=!0,targetElement.dispatchEvent(clickEvent)},FastClick.prototype.determineEventType=function(targetElement){return deviceIsAndroid&&"select"===targetElement.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(targetElement){var length;deviceIsIOS&&targetElement.setSelectionRange&&0!==targetElement.type.indexOf("date")&&"time"!==targetElement.type&&"month"!==targetElement.type?(length=targetElement.value.length,targetElement.setSelectionRange(length,length)):targetElement.focus()},FastClick.prototype.updateScrollParent=function(targetElement){var scrollParent,parentElement;if(scrollParent=targetElement.fastClickScrollParent,!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement,targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}scrollParent&&(scrollParent.fastClickLastScrollTop=scrollParent.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){return eventTarget.nodeType===Node.TEXT_NODE?eventTarget.parentNode:eventTarget},FastClick.prototype.onTouchStart=function(event){var targetElement,touch,selection;if(event.targetTouches.length>1)return!0;if(targetElement=this.getTargetElementFromEventTarget(event.target),touch=event.targetTouches[0],deviceIsIOS){if(selection=window.getSelection(),selection.rangeCount&&!selection.isCollapsed)return!0;if(!deviceIsIOS4){if(touch.identifier&&touch.identifier===this.lastTouchIdentifier)return event.preventDefault(),!1;this.lastTouchIdentifier=touch.identifier,this.updateScrollParent(targetElement)}}return this.trackingClick=!0,this.trackingClickStart=event.timeStamp,this.targetElement=targetElement,this.touchStartX=touch.pageX,this.touchStartY=touch.pageY,event.timeStamp-this.lastClickTime<this.tapDelay&&event.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(event){var touch=event.changedTouches[0],boundary=this.touchBoundary;return Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary},FastClick.prototype.onTouchMove=function(event){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event))&&(this.trackingClick=!1,this.targetElement=null),!0)},FastClick.prototype.findControl=function(labelElement){return void 0!==labelElement.control?labelElement.control:labelElement.htmlFor?document.getElementById(labelElement.htmlFor):labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(event){var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick)return!0;if(event.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(event.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=event.timeStamp,trackingClickStart=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(touch=event.changedTouches[0],targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement,targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent),targetTagName=targetElement.tagName.toLowerCase(),"label"===targetTagName){if(forElement=this.findControl(targetElement)){if(this.focus(targetElement),deviceIsAndroid)return!1;targetElement=forElement}}else if(this.needsFocus(targetElement))return event.timeStamp-trackingClickStart>100||deviceIsIOS&&window.top!==window&&"input"===targetTagName?(this.targetElement=null,!1):(this.focus(targetElement),this.sendClick(targetElement,event),deviceIsIOS&&"select"===targetTagName||(this.targetElement=null,event.preventDefault()),!1);return!(!deviceIsIOS||deviceIsIOS4||(scrollParent=targetElement.fastClickScrollParent,!scrollParent||scrollParent.fastClickLastScrollTop===scrollParent.scrollTop))||(this.needsClick(targetElement)||(event.preventDefault(),this.sendClick(targetElement,event)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(event){return!this.targetElement||(!!event.forwardedTouchEvent||(!event.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(event.stopImmediatePropagation?event.stopImmediatePropagation():event.propagationStopped=!0,event.stopPropagation(),event.preventDefault(),!1))))},FastClick.prototype.onClick=function(event){var permitted;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===event.target.type&&0===event.detail||(permitted=this.onMouse(event),permitted||(this.targetElement=null),permitted)},FastClick.prototype.destroy=function(){var layer=this.layer;deviceIsAndroid&&(layer.removeEventListener("mouseover",this.onMouse,!0),layer.removeEventListener("mousedown",this.onMouse,!0),layer.removeEventListener("mouseup",this.onMouse,!0)),layer.removeEventListener("click",this.onClick,!0),layer.removeEventListener("touchstart",this.onTouchStart,!1),layer.removeEventListener("touchmove",this.onTouchMove,!1),layer.removeEventListener("touchend",this.onTouchEnd,!1),layer.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(layer){function getChromeVersion(){var raw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!raw&&parseInt(raw[2],10)}var metaViewport,chromeVersion,blackberryVersion,firefoxVersion;if("undefined"==typeof window.ontouchstart)return!0;if(chromeVersion=getChromeVersion()){if(!deviceIsAndroid)return!0;if(metaViewport=document.querySelector("meta[name=viewport]")){if(metaViewport.content.indexOf("user-scalable=no")!==-1)return!0;if(chromeVersion>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&(blackberryVersion=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),blackberryVersion[1]>=10&&blackberryVersion[2]>=3&&(metaViewport=document.querySelector("meta[name=viewport]")))){if(metaViewport.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===layer.style.msTouchAction||"manipulation"===layer.style.touchAction||(firefoxVersion=20,!!(firefoxVersion>=27&&(metaViewport=document.querySelector("meta[name=viewport]"),metaViewport&&(metaViewport.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===layer.style.touchAction||"manipulation"===layer.style.touchAction))},FastClick.attach=function(layer,options){return new FastClick(layer,options)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick}();